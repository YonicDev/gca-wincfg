environment:
  nodejs_version: "7"
  npm_config_arch: x64
  npm_config_target_arch: x64

image:
- Visual Studio 2015
- Visual Studio 2017
platform:
- x64

branches:
    only:
        - appveyor
configuration:
- Release

clone_script:
- cmd: git clone -q --recursive --branch=%APPVEYOR_REPO_BRANCH% https://github.com/%APPVEYOR_REPO_NAME%.git %APPVEYOR_BUILD_FOLDER%
- cmd: cd %APPVEYOR_BUILD_FOLDER%
- cmd: git checkout -q %APPVEYOR_REPO_COMMIT%
- cmd: git submodule update --init --recursive

build_script:
- cmd: msbuild cryptlib.vcxproj /p:platform=%platform%;configuration=%configuration%

# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js or io.js
  - ps: Install-Product node $env:nodejs_version
  # install modules
  - npm install

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - node --version
  - npm --version
  # run tests
  - npm test

# Don't actually build.
build: off
